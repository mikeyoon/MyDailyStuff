/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\n/**\r\n * Created by myoon on 4/30/2015.\r\n */\r\n(void 0)(\"models/requests\", [], function (exports_1, context_1) {\r\n    \"use strict\";\r\n    var __moduleName = context_1 && context_1.id;\r\n    var EditJournalEntry, Login, Register, SaveProfile, PasswordReset, Search;\r\n    return {\r\n        setters: [],\r\n        execute: function () {\r\n            EditJournalEntry = /** @class */ (function () {\r\n                function EditJournalEntry(entry, index) {\r\n                    this.entry = entry;\r\n                    this.index = index;\r\n                }\r\n                return EditJournalEntry;\r\n            }());\r\n            exports_1(\"EditJournalEntry\", EditJournalEntry);\r\n            Login = /** @class */ (function () {\r\n                function Login(email, password, persist) {\r\n                    this.email = email;\r\n                    this.password = password;\r\n                    this.persist = persist;\r\n                }\r\n                return Login;\r\n            }());\r\n            exports_1(\"Login\", Login);\r\n            Register = /** @class */ (function () {\r\n                function Register(email, password) {\r\n                    this.email = email;\r\n                    this.password = password;\r\n                }\r\n                return Register;\r\n            }());\r\n            exports_1(\"Register\", Register);\r\n            SaveProfile = /** @class */ (function () {\r\n                function SaveProfile(password) {\r\n                    this.password = password;\r\n                }\r\n                return SaveProfile;\r\n            }());\r\n            exports_1(\"SaveProfile\", SaveProfile);\r\n            PasswordReset = /** @class */ (function () {\r\n                function PasswordReset(token, password) {\r\n                    this.token = token;\r\n                    this.password = password;\r\n                }\r\n                return PasswordReset;\r\n            }());\r\n            exports_1(\"PasswordReset\", PasswordReset);\r\n            Search = /** @class */ (function () {\r\n                function Search(query, offset) {\r\n                    this.offset = offset;\r\n                    this.query = query;\r\n                }\r\n                return Search;\r\n            }());\r\n            exports_1(\"Search\", Search);\r\n        }\r\n    };\r\n});\r\n(void 0)(\"actions\", [\"models/requests\"], function (exports_2, context_2) {\r\n    \"use strict\";\r\n    var __moduleName = context_2 && context_2.id;\r\n    var Requests, c, methods, actions;\r\n    return {\r\n        setters: [\r\n            function (Requests_1) {\r\n                Requests = Requests_1;\r\n            }\r\n        ],\r\n        execute: function () {\r\n            c = {\r\n                ACCOUNT: {\r\n                    LOGIN: \"ACCOUNT:LOGIN\",\r\n                    PROFILE: \"ACCOUNT:PROFILE\",\r\n                    REGISTER: \"ACCOUNT:REGISTER\",\r\n                    LOGOUT: \"ACCOUNT:LOGOUT\",\r\n                    VERIFY: \"ACCOUNT:VERIFY\",\r\n                    RESET_PASSWORD: \"ACCOUNT:RESET_PASSWORD\",\r\n                    SEND_RESET: \"ACCOUNT:SEND_RESET\",\r\n                    SAVE_PROFILE: \"ACCOUNT:SAVE_PROFILE\",\r\n                    CLEAR_STORE: \"ACCOUNT:CLEAR_STORE\",\r\n                    GET_STREAK: \"ACCOUNT:GET_STREAK\"\r\n                },\r\n                JOURNAL: {\r\n                    GET: \"JOURNAL:GET\",\r\n                    ADD: \"JOURNAL:ADD\",\r\n                    EDIT: \"JOURNAL:EDIT\",\r\n                    DELETE: \"JOURNAL:DELETE\",\r\n                    TOGGLE_CALENDAR: \"JOURNAL:CALENDAR\"\r\n                },\r\n                SEARCH: {\r\n                    DATE: \"SEARCH:DATE\",\r\n                    QUERY: \"SEARCH:QUERY\",\r\n                    CLEAR: \"SEARCH:CLEAR\",\r\n                },\r\n                ROUTE: {\r\n                    HOME: \"ROUTE:HOME\",\r\n                    SEARCH: \"ROUTE:SEARCH\"\r\n                }\r\n            };\r\n            methods = {\r\n                journal: {\r\n                    add: function (entry) {\r\n                        this.dispatch(c.JOURNAL.ADD, entry);\r\n                    },\r\n                    edit: function (entry) {\r\n                        this.dispatch(c.JOURNAL.EDIT, entry);\r\n                    },\r\n                    get: function (date) {\r\n                        this.dispatch(c.JOURNAL.GET, date);\r\n                    },\r\n                    delete: function () {\r\n                        this.dispatch(c.JOURNAL.DELETE);\r\n                    },\r\n                    toggleCalendar: function (show) {\r\n                        this.dispatch(c.JOURNAL.TOGGLE_CALENDAR, show);\r\n                    }\r\n                },\r\n                search: {\r\n                    date: function (date) {\r\n                        this.dispatch(c.SEARCH.DATE, date);\r\n                    },\r\n                    query: function (query, offset) {\r\n                        this.dispatch(c.SEARCH.QUERY, new Requests.Search(query, offset));\r\n                    },\r\n                    clear: function () {\r\n                        this.dispatch(c.SEARCH.CLEAR);\r\n                    }\r\n                },\r\n                account: {\r\n                    login: function (payload) {\r\n                        this.dispatch(c.ACCOUNT.LOGIN, payload);\r\n                    },\r\n                    profile: function () {\r\n                        this.dispatch(c.ACCOUNT.PROFILE);\r\n                    },\r\n                    logout: function () {\r\n                        this.dispatch(c.ACCOUNT.LOGOUT);\r\n                    },\r\n                    register: function (payload) {\r\n                        this.dispatch(c.ACCOUNT.REGISTER, payload);\r\n                    },\r\n                    verify: function (token) {\r\n                        this.dispatch(c.ACCOUNT.VERIFY, token);\r\n                    },\r\n                    sendReset: function (email) {\r\n                        this.dispatch(c.ACCOUNT.SEND_RESET, email);\r\n                    },\r\n                    resetPassword: function (payload) {\r\n                        this.dispatch(c.ACCOUNT.RESET_PASSWORD, payload);\r\n                    },\r\n                    saveProfile: function (payload) {\r\n                        this.dispatch(c.ACCOUNT.SAVE_PROFILE, payload);\r\n                    },\r\n                    clearResults: function () {\r\n                        this.dispatch(c.ACCOUNT.CLEAR_STORE);\r\n                    },\r\n                    getStreak: function (force) {\r\n                        this.dispatch(c.ACCOUNT.GET_STREAK, force);\r\n                    }\r\n                },\r\n                routes: {\r\n                    home: function () {\r\n                        this.dispatch(c.ROUTE.HOME);\r\n                    },\r\n                    search: function (query, offset) {\r\n                        this.dispatch(c.ROUTE.SEARCH, new Requests.Search(query, offset));\r\n                    }\r\n                }\r\n            };\r\n            actions = {\r\n                methods: methods,\r\n                constants: c\r\n            };\r\n            exports_2(\"default\", actions);\r\n        }\r\n    };\r\n});\r\n(void 0)(\"components/BaseFluxxorComponent\", [\"react\", \"fluxxor\"], function (exports_3, context_3) {\r\n    \"use strict\";\r\n    var __moduleName = context_3 && context_3.id;\r\n    var React, fluxxor_1, storeMixin, BaseFluxxorComponent;\r\n    return {\r\n        setters: [\r\n            function (React_1) {\r\n                React = React_1;\r\n            },\r\n            function (fluxxor_1_1) {\r\n                fluxxor_1 = fluxxor_1_1;\r\n            }\r\n        ],\r\n        execute: function () {\r\n            storeMixin = fluxxor_1.StoreWatchMixin;\r\n            BaseFluxxorComponent = /** @class */ (function (_super) {\r\n                __extends(BaseFluxxorComponent, _super);\r\n                function BaseFluxxorComponent(props) {\r\n                    var _this = _super.call(this, props) || this;\r\n                    var mixin = fluxxor_1.StoreWatchMixin.apply(_this, _this.getWatchers());\r\n                    _this.__patch('componentDidMount', mixin);\r\n                    _this.__patch('componentWillUnmount', mixin);\r\n                    _this.__patch('getInitialState', mixin);\r\n                    delete _this.getInitialState; // Fluxxor is so outdated :(\r\n                    _this.state = _this.getStateFromFlux();\r\n                    return _this;\r\n                }\r\n                BaseFluxxorComponent.prototype.__patch = function (name, mixin) {\r\n                    if (this[name]) {\r\n                        var fn_1 = this[name];\r\n                        this[name] = function () {\r\n                            mixin[name].apply(this, arguments);\r\n                            fn_1.apply(this, arguments);\r\n                        };\r\n                    }\r\n                    else {\r\n                        this[name] = mixin[name];\r\n                    }\r\n                };\r\n                BaseFluxxorComponent.prototype.getFlux = function () { return this.props.flux; };\r\n                return BaseFluxxorComponent;\r\n            }(React.Component));\r\n            exports_3(\"default\", BaseFluxxorComponent);\r\n        }\r\n    };\r\n});\r\n(void 0)(\"components/Login\", [\"react\", \"models/requests\", \"components/BaseFluxxorComponent\"], function (exports_4, context_4) {\r\n    \"use strict\";\r\n    var __moduleName = context_4 && context_4.id;\r\n    var React, Requests, BaseFluxxorComponent_1, emailRegex, LoginComponent;\r\n    return {\r\n        setters: [\r\n            function (React_2) {\r\n                React = React_2;\r\n            },\r\n            function (Requests_2) {\r\n                Requests = Requests_2;\r\n            },\r\n            function (BaseFluxxorComponent_1_1) {\r\n                BaseFluxxorComponent_1 = BaseFluxxorComponent_1_1;\r\n            }\r\n        ],\r\n        execute: function () {\r\n            emailRegex = /^([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22)(\\x2e([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22))*\\x40([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d)(\\x2e([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d))*$/;\r\n            LoginComponent = /** @class */ (function (_super) {\r\n                __extends(LoginComponent, _super);\r\n                function LoginComponent() {\r\n                    return _super !== null && _super.apply(this, arguments) || this;\r\n                }\r\n                LoginComponent.prototype.getWatchers = function () { return ['auth']; };\r\n                LoginComponent.prototype.isValid = function () {\r\n                    return !this.state.errors;\r\n                };\r\n                LoginComponent.prototype.validate = function () {\r\n                    var errors = {};\r\n                    if (!emailRegex.test(this.state.email)) {\r\n                        errors[\"email\"] = \"Email is invalid\";\r\n                    }\r\n                    if (!this.state.password || this.state.password.length < 6) {\r\n                        errors[\"password\"] = \"Password needs to be 6 or more characters\";\r\n                    }\r\n                    else if (this.state.password && this.state.password.length > 50) {\r\n                        errors[\"password\"] = \"Password needs to be less than 50 characters\";\r\n                    }\r\n                    this.setState({ errors: errors });\r\n                    return !Object.keys(errors).length;\r\n                };\r\n                LoginComponent.prototype.getStateFromFlux = function () {\r\n                    return {\r\n                        auth: this.getFlux().store(\"auth\"),\r\n                        errors: {},\r\n                        email: '',\r\n                        password: '',\r\n                        persist: false,\r\n                    };\r\n                };\r\n                LoginComponent.prototype.componentDidMount = function () {\r\n                    this.getFlux().actions.account.clearResults();\r\n                };\r\n                LoginComponent.prototype.onSubmit = function (ev) {\r\n                    ev.preventDefault();\r\n                    if (this.validate()) {\r\n                        this.getFlux().actions.account.login(new Requests.Login(this.state.email, this.state.password, this.state.persist));\r\n                    }\r\n                };\r\n                LoginComponent.prototype.handleTextChange = function (name, ev) {\r\n                    var state = {};\r\n                    state[name] = ev.target.value;\r\n                    this.setState(state);\r\n                };\r\n                LoginComponent.prototype.handleCheckChange = function (name, ev) {\r\n                    var state = {};\r\n                    state[name] = ev.target.checked;\r\n                    this.setState(state);\r\n                };\r\n                LoginComponent.prototype.renderLoginError = function () {\r\n                    if (this.state.auth.error) {\r\n                        return React.createElement(\"div\", { className: \"alert alert-danger\" }, this.state.auth.error);\r\n                    }\r\n                    return null;\r\n                };\r\n                LoginComponent.prototype.render = function () {\r\n                    return React.createElement(\"div\", { className: \"row\" },\r\n                        React.createElement(\"div\", { className: \"col-md-6 col-md-offset-3\" },\r\n                            React.createElement(\"h3\", { className: \"text-center\" }, \"Login to your account\"),\r\n                            React.createElement(\"br\", null),\r\n                            this.renderLoginError(),\r\n                            React.createElement(\"form\", { onSubmit: this.onSubmit.bind(this) },\r\n                                React.createElement(\"div\", { className: \"form-group \" + (this.state.errors[\"email\"] ? 'has-error' : ''), key: \"1\" },\r\n                                    React.createElement(\"label\", { htmlFor: \"email\" }, \"Email:\"),\r\n                                    React.createElement(\"input\", { className: \"form-control\", id: \"email\", name: \"email\", value: this.state.email, onChange: this.handleTextChange.bind(this, \"email\") }),\r\n                                    this.state.errors[\"email\"] ? React.createElement(\"span\", { className: \"help-block\" }, this.state.errors[\"email\"]) : null),\r\n                                React.createElement(\"div\", { className: \"form-group \" + (this.state.errors[\"password\"] ? 'has-error' : ''), key: \"2\" },\r\n                                    React.createElement(\"label\", { htmlFor: \"password\" }, \"Password:\"),\r\n                                    React.createElement(\"input\", { className: \"form-control\", id: \"password\", name: \"password\", type: \"password\", value: this.state.password, onChange: this.handleTextChange.bind(this, \"password\") }),\r\n                                    this.state.errors[\"password\"] ? React.createElement(\"span\", { className: \"help-block\" }, this.state.errors[\"password\"]) : null),\r\n                                React.createElement(\"div\", { className: \"checkbox\", key: \"3\" },\r\n                                    React.createElement(\"label\", { htmlFor: \"rememberMe\" },\r\n                                        React.createElement(\"input\", { id: \"rememberMe\", name: \"persist\", type: \"checkbox\", checked: this.state.persist, value: \"persist\", onChange: this.handleCheckChange.bind(this, \"persist\") }),\r\n                                        \"Keep me logged in\")),\r\n                                React.createElement(\"div\", { className: \"text-center\", key: \"4\" },\r\n                                    React.createElement(\"button\", { className: \"btn btn-primary\", type: \"submit\" }, \"Login\"),\r\n                                    React.createElement(\"span\", { className: \"margin-small\" }, \"or\"),\r\n                                    React.createElement(\"a\", { href: \"/register\" }, \"Register for a new account\")),\r\n                                React.createElement(\"div\", { className: \"text-center\", key: \"5\" },\r\n                                    React.createElement(\"a\", { className: \"btn btn-link\", href: \"/forgot-password\" }, \"I forgot my password\")))));\r\n                };\r\n                return LoginComponent;\r\n            }(BaseFluxxorComponent_1.default));\r\n            exports_4(\"default\", LoginComponent);\r\n        }\r\n    };\r\n});\r\n(void 0)(\"components/Signup\", [\"react\", \"models/requests\", \"components/BaseFluxxorComponent\"], function (exports_5, context_5) {\r\n    \"use strict\";\r\n    var __moduleName = context_5 && context_5.id;\r\n    var React, Requests, BaseFluxxorComponent_2, emailRegex, SignupComponent;\r\n    return {\r\n        setters: [\r\n            function (React_3) {\r\n                React = React_3;\r\n            },\r\n            function (Requests_3) {\r\n                Requests = Requests_3;\r\n            },\r\n            function (BaseFluxxorComponent_2_1) {\r\n                BaseFluxxorComponent_2 = BaseFluxxorComponent_2_1;\r\n            }\r\n        ],\r\n        execute: function () {\r\n            emailRegex = /^([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22)(\\x2e([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22))*\\x40([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d)(\\x2e([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d))*$/;\r\n            SignupComponent = /** @class */ (function (_super) {\r\n                __extends(SignupComponent, _super);\r\n                function SignupComponent() {\r\n                    return _super !== null && _super.apply(this, arguments) || this;\r\n                }\r\n                SignupComponent.prototype.getWatchers = function () { return ['auth']; };\r\n                SignupComponent.prototype.isValid = function () {\r\n                    return !this.state.errors;\r\n                };\r\n                SignupComponent.prototype.componentDidMount = function () {\r\n                    this.getFlux().actions.account.clearResults();\r\n                };\r\n                SignupComponent.prototype.getStateFromFlux = function () {\r\n                    var result = {\r\n                        auth: this.getFlux().store(\"auth\"),\r\n                        errors: {},\r\n                        email: '',\r\n                        confirm: '',\r\n                        password: '',\r\n                    };\r\n                    return result;\r\n                };\r\n                SignupComponent.prototype.onSubmit = function (ev) {\r\n                    ev.preventDefault();\r\n                    if (this.validate()) {\r\n                        if (this.state.confirm == this.state.password) {\r\n                            this.getFlux().actions.account.register(new Requests.Register(this.state.email, this.state.password));\r\n                        }\r\n                    }\r\n                };\r\n                SignupComponent.prototype.handleTextChange = function (name, ev) {\r\n                    var state = {};\r\n                    state[name] = ev.target.value;\r\n                    this.setState(state);\r\n                };\r\n                SignupComponent.prototype.validate = function () {\r\n                    var errors = {};\r\n                    if (this.state.confirm != this.state.password) {\r\n                        errors[\"password\"] = \"passwords do not match\";\r\n                        errors[\"confirm\"] = \"passwords do not match\";\r\n                    }\r\n                    else if (!this.state.password || this.state.password.length < 6) {\r\n                        errors[\"password\"] = \"Password needs to be 6 or more characters\";\r\n                    }\r\n                    else if (this.state.password && this.state.password.length > 50) {\r\n                        errors[\"password\"] = \"Password needs to be less than 50 characters\";\r\n                    }\r\n                    if (!emailRegex.test(this.state.email)) {\r\n                        errors[\"email\"] = \"Email is invalid\";\r\n                    }\r\n                    this.setState({ errors: errors });\r\n                    return !Object.keys(errors).length;\r\n                };\r\n                SignupComponent.prototype.renderSignupError = function () {\r\n                    if (this.state.auth.error) {\r\n                        return React.createElement(\"div\", { className: \"alert alert-danger\" }, this.state.auth.error);\r\n                    }\r\n                    return null;\r\n                };\r\n                SignupComponent.prototype.render = function () {\r\n                    return React.createElement(\"div\", { className: \"row\" },\r\n                        React.createElement(\"div\", { className: \"col-md-6 col-md-offset-3\" },\r\n                            React.createElement(\"h3\", { className: \"text-center\" }, \"Register for an account\"),\r\n                            React.createElement(\"br\", null),\r\n                            this.renderSignupError(),\r\n                            this.state.auth.registerResult.success ?\r\n                                React.createElement(\"div\", null,\r\n                                    React.createElement(\"div\", { className: \"alert alert-success\" },\r\n                                        \"Verification email sent to\",\r\n                                        this.state.email,\r\n                                        \". Please check your email for directions to complete your signup.\"),\r\n                                    React.createElement(\"p\", null,\r\n                                        \"Click \",\r\n                                        React.createElement(\"a\", { href: \"/login\" }, \"here\"),\r\n                                        \" to return to the login page\")) :\r\n                                React.createElement(\"form\", { onSubmit: this.onSubmit.bind(this) },\r\n                                    React.createElement(\"div\", { className: \"form-group \" + (this.state.errors[\"email\"] ? 'has-error' : ''), key: \"1\" },\r\n                                        React.createElement(\"label\", { className: \"control-label\", htmlFor: \"email\" }, \"Email:\"),\r\n                                        React.createElement(\"input\", { className: \"form-control\", id: \"email\", name: \"email\", value: this.state.email, onChange: this.handleTextChange.bind(this, \"email\") }),\r\n                                        this.state.errors[\"email\"] ? React.createElement(\"span\", { className: \"help-block\" }, this.state.errors[\"email\"]) : null),\r\n                                    React.createElement(\"div\", { className: \"form-group \" + (this.state.errors[\"password\"] ? 'has-error' : ''), key: \"2\" },\r\n                                        React.createElement(\"label\", { className: \"control-label\", htmlFor: \"password\" }, \"Password:\"),\r\n                                        React.createElement(\"input\", { className: \"form-control\", id: \"password\", name: \"password\", type: \"password\", value: this.state.password, onChange: this.handleTextChange.bind(this, \"password\") }),\r\n                                        this.state.errors[\"password\"] ? React.createElement(\"span\", { className: \"help-block\" }, this.state.errors[\"password\"]) : null),\r\n                                    React.createElement(\"div\", { className: \"form-group \" + (this.state.errors[\"confirm\"] ? 'has-error' : ''), key: \"3\" },\r\n                                        React.createElement(\"label\", { className: \"control-label\", htmlFor: \"confirm\" }, \"Confirm Password:\"),\r\n                                        React.createElement(\"input\", { className: \"form-control\", id: \"confirm\", name: \"confirm\", type: \"password\", value: this.state.confirm, onChange: this.handleTextChange.bind(this, \"confirm\") }),\r\n                                        this.state.errors[\"confirm\"] ? React.createElement(\"span\", { className: \"help-block\" }, this.state.errors[\"confirm\"]) : null),\r\n                                    React.createElement(\"div\", { className: \"text-center\" },\r\n                                        React.createElement(\"button\", { className: \"btn btn-primary\", type: \"submit\" }, \"Register\"),\r\n                                        React.createElement(\"span\", { className: \"margin-small\" }, \"or\"),\r\n                                        React.createElement(\"a\", { href: \"/login\" }, \"Login with an existing account\")))));\r\n                };\r\n                return SignupComponent;\r\n            }(BaseFluxxorComponent_2.default));\r\n            exports_5(\"default\", SignupComponent);\r\n        }\r\n    };\r\n});\r\n/**\r\n * Created by mike on 5/3/15.\r\n */\r\n(void 0)(\"models/responses\", [], function (exports_6, context_6) {\r\n    \"use strict\";\r\n    var __moduleName = context_6 && context_6.id;\r\n    return {\r\n        setters: [],\r\n        execute: function () {\r\n        }\r\n    };\r\n});\r\n(void 0)(\"components/Streak\", [\"components/BaseFluxxorComponent\", \"react\", \"bootstrap\"], function (exports_7, context_7) {\r\n    \"use strict\";\r\n    var __moduleName = context_7 && context_7.id;\r\n    var BaseFluxxorComponent_3, React, StreakComponent;\r\n    return {\r\n        setters: [\r\n            function (BaseFluxxorComponent_3_1) {\r\n                BaseFluxxorComponent_3 = BaseFluxxorComponent_3_1;\r\n            },\r\n            function (React_4) {\r\n                React = React_4;\r\n            },\r\n            function (_1) {\r\n            }\r\n        ],\r\n        execute: function () {\r\n            StreakComponent = /** @class */ (function (_super) {\r\n                __extends(StreakComponent, _super);\r\n                function StreakComponent() {\r\n                    return _super !== null && _super.apply(this, arguments) || this;\r\n                }\r\n                StreakComponent.prototype.getWatchers = function () { return ['auth']; };\r\n                StreakComponent.prototype.getStateFromFlux = function () {\r\n                    var auth = this.getFlux().store(\"auth\");\r\n                    return {\r\n                        streak: auth.streak,\r\n                    };\r\n                };\r\n                StreakComponent.prototype.componentWillReceiveProps = function (nextProps) {\r\n                    if (nextProps.update) {\r\n                        this.getFlux().actions.account.getStreak(true);\r\n                    }\r\n                };\r\n                StreakComponent.prototype.componentWillMount = function () {\r\n                    this.getFlux().actions.account.getStreak(false);\r\n                };\r\n                StreakComponent.prototype.componentDidMount = function () {\r\n                    $('[data-toggle=\"tooltip\"]').tooltip();\r\n                };\r\n                StreakComponent.prototype.render = function () {\r\n                    return React.createElement(\"span\", { \"data-toggle\": \"tooltip\", \"data-placement\": \"left\", title: \"Number of contiguous entries over the last ten days\" },\r\n                        \"Streak \",\r\n                        \" \",\r\n                        React.createElement(\"span\", { className: \"badge\" },\r\n                            this.state.streak,\r\n                            \" \",\r\n                            \" \",\r\n                            this.state.streak >= 10 ? React.createElement(\"span\", { className: \"glyphicon glyphicon-star\" }) : null));\r\n                };\r\n                return StreakComponent;\r\n            }(BaseFluxxorComponent_3.default));\r\n            exports_7(\"default\", StreakComponent);\r\n        }\r\n    };\r\n});\r\n/// <reference path='../../typings/browser.d.ts' />\r\n(void 0)(\"components/Journal\", [\"react\", \"mobx-react\", \"models/requests\", \"moment\", \"page\", \"marked\", \"components/Streak\", \"react-date-picker\"], function (exports_8, context_8) {\r\n    \"use strict\";\r\n    var __moduleName = context_8 && context_8.id;\r\n    var react_1, mobx_react_1, Requests, moment_1, page_1, marked_1, Streak_1, react_date_picker_1, JournalComponent;\r\n    return {\r\n        setters: [\r\n            function (react_1_1) {\r\n                react_1 = react_1_1;\r\n            },\r\n            function (mobx_react_1_1) {\r\n                mobx_react_1 = mobx_react_1_1;\r\n            },\r\n            function (Requests_4) {\r\n                Requests = Requests_4;\r\n            },\r\n            function (moment_1_1) {\r\n                moment_1 = moment_1_1;\r\n            },\r\n            function (page_1_1) {\r\n                page_1 = page_1_1;\r\n            },\r\n            function (marked_1_1) {\r\n                marked_1 = marked_1_1;\r\n            },\r\n            function (Streak_1_1) {\r\n                Streak_1 = Streak_1_1;\r\n            },\r\n            function (react_date_picker_1_1) {\r\n                react_date_picker_1 = react_date_picker_1_1;\r\n            }\r\n        ],\r\n        execute: function () {\r\n            JournalComponent = /** @class */ (function (_super) {\r\n                __extends(JournalComponent, _super);\r\n                function JournalComponent() {\r\n                    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n                    _this.handleAddEntry = function (ev) {\r\n                        ev.preventDefault();\r\n                        if (_this.validate()) {\r\n                            if (_this.state.hasEntry) {\r\n                                _this.getFlux().actions.journal.edit(new Requests.EditJournalEntry(_this.state.newEntry, _this.state.current.entries.length));\r\n                            }\r\n                            else {\r\n                                _this.getFlux().actions.journal.add(_this.state.newEntry);\r\n                            }\r\n                        }\r\n                    };\r\n                    _this.closeCalendar = function (ev) {\r\n                        if (_this.state.showCalendar && !$(ev.target).closest('.popover').length) {\r\n                            window.removeEventListener('click', _this.closeCalendar, false);\r\n                            window.removeEventListener('touchend', _this.closeCalendar, false);\r\n                            _this.getFlux().actions.journal.toggleCalendar(false);\r\n                        }\r\n                    };\r\n                    _this.handleKeyDown = function (ev) {\r\n                        if ((ev.keyCode == 10 || ev.keyCode == 13) && ev.ctrlKey) {\r\n                            _this.handleAddEntry(ev);\r\n                        }\r\n                    };\r\n                    _this.handleBlur = function (ev) {\r\n                        _this.validate();\r\n                    };\r\n                    return _this;\r\n                }\r\n                JournalComponent.prototype.getWatchers = function () { return ['journal']; };\r\n                JournalComponent.prototype.getStateFromFlux = function () {\r\n                    var journal = this.getFlux().store(\"journal\");\r\n                    return {\r\n                        current: journal.current,\r\n                        date: journal.date,\r\n                        hasEntry: journal.hasEntry,\r\n                        newEntry: '',\r\n                        errors: {},\r\n                        serviceError: journal.error,\r\n                        adding: journal.adding,\r\n                        loading: journal.loading,\r\n                        editing: journal.editing,\r\n                        deleting: journal.deleting,\r\n                        started: journal.started,\r\n                        showCalendar: journal.showCalendar\r\n                    };\r\n                };\r\n                JournalComponent.prototype.componentWillReceiveProps = function (nextProps) {\r\n                    this.getFlux().actions.journal.get(nextProps.date);\r\n                    //this.getFlux().actions.search.date(nextProps.date);\r\n                    this.validate();\r\n                };\r\n                JournalComponent.prototype.componentWillMount = function () {\r\n                    this.getFlux().actions.journal.get(this.props.date);\r\n                };\r\n                JournalComponent.prototype.componentWillUpdate = function (_, nextState) {\r\n                    this.refreshStreak = !nextState.deleting && this.state.deleting\r\n                        || !nextState.adding && this.state.adding;\r\n                };\r\n                JournalComponent.prototype.componentDidMount = function () {\r\n                };\r\n                JournalComponent.prototype.componentWillUnmount = function () {\r\n                    window.removeEventListener('click', this.closeCalendar, false);\r\n                    window.removeEventListener('touchend', this.closeCalendar, false);\r\n                };\r\n                JournalComponent.prototype.validate = function () {\r\n                    var errors = {};\r\n                    if (this.state.newEntry.length > 500) {\r\n                        errors[\"newEntry\"] = \"Entry must be 500 characters or less\";\r\n                    }\r\n                    else if (this.state.current && this.state.current.entries.length >= 10) {\r\n                        errors[\"newEntry\"] = \"Only 10 entries are allowed per day\";\r\n                    }\r\n                    this.setState({ errors: errors });\r\n                    return !Object.keys(errors).length;\r\n                };\r\n                JournalComponent.prototype.handleEditEntry = function (entry, index, ev) {\r\n                    this.getFlux().actions.journal.edit(new Requests.EditJournalEntry(entry, index));\r\n                };\r\n                JournalComponent.prototype.handleDeleteEntry = function (index, ev) {\r\n                    if (this.state.current.entries.length > 1) {\r\n                        this.getFlux().actions.journal.edit(new Requests.EditJournalEntry(null, index));\r\n                    }\r\n                    else {\r\n                        this.getFlux().actions.journal.delete();\r\n                    }\r\n                };\r\n                JournalComponent.prototype.handleDeleteAll = function (ev) {\r\n                    this.getFlux().actions.journal.delete();\r\n                };\r\n                JournalComponent.prototype.handleTextChange = function (name, ev) {\r\n                    var state = {};\r\n                    state[name] = ev.target.value;\r\n                    this.setState(state);\r\n                };\r\n                JournalComponent.prototype.handlePrev = function (date, ev) {\r\n                    ev.preventDefault();\r\n                    page_1.default('/journal/' + date.format(\"YYYY-M-D\"));\r\n                };\r\n                JournalComponent.prototype.handleNext = function (date, ev) {\r\n                    ev.preventDefault();\r\n                    page_1.default('/journal/' + date.format(\"YYYY-M-D\"));\r\n                };\r\n                JournalComponent.prototype.handleDateChange = function (dateText, date, ev) {\r\n                    page_1.default('/journal/' + date.format(\"YYYY-M-D\"));\r\n                };\r\n                JournalComponent.prototype.handleToggleCalendar = function (show, ev) {\r\n                    ev.preventDefault();\r\n                    ev.stopPropagation();\r\n                    if (!this.state.showCalendar) {\r\n                        window.addEventListener('touchend', this.closeCalendar, false);\r\n                        window.addEventListener('click', this.closeCalendar, false);\r\n                        this.getFlux().actions.journal.toggleCalendar(show);\r\n                    }\r\n                };\r\n                JournalComponent.prototype.renderEntries = function () {\r\n                    var _this = this;\r\n                    if (this.state.hasEntry) {\r\n                        return React.createElement(\"div\", { className: \"margin-top-md\" }, this.state.current.entries.map(function (e, index) {\r\n                            return React.createElement(\"div\", { className: \"well\", key: index },\r\n                                React.createElement(\"button\", { className: \"btn btn-clear pull-right\", key: \"delete\", onClick: function (ev) { return _this.handleDeleteEntry(index, ev); } },\r\n                                    React.createElement(\"span\", { className: \"glyphicon glyphicon-remove\" })),\r\n                                React.createElement(\"div\", { className: \"journal-entry\", dangerouslySetInnerHTML: { __html: marked_1.default(e) } }));\r\n                        }));\r\n                    }\r\n                    else if (this.state.started) {\r\n                        return React.createElement(\"h3\", { className: \"text-center\" }, \"No entries...try to remember!\");\r\n                    }\r\n                    else {\r\n                        return React.createElement(\"div\", { className: \"margin-top-md\" },\r\n                            React.createElement(\"div\", { className: \"progress\" },\r\n                                React.createElement(\"div\", { className: \"progress-bar progress-bar-striped active\", role: \"progressbar\", style: { width: \"100%\" } })));\r\n                    }\r\n                };\r\n                JournalComponent.prototype.render = function () {\r\n                    var _this = this;\r\n                    var today = moment_1.default(this.state.date || this.props.date);\r\n                    var next = moment_1.default(this.state.date || this.props.date).add(1, 'day');\r\n                    var prev = moment_1.default(this.state.date || this.props.date).add(-1, 'day');\r\n                    return React.createElement(\"div\", { className: \"row\" },\r\n                        React.createElement(\"div\", { className: \"col-md-8 col-md-offset-2\" },\r\n                            React.createElement(\"h2\", { className: \"text-center\" },\r\n                                React.createElement(\"button\", { className: \"btn btn-link \" + (this.state.loading ? \"disabled\" : \"\"), key: \"prev\", onClick: this.handlePrev.bind(this, prev) },\r\n                                    React.createElement(\"span\", { className: \"glyphicon glyphicon-menu-left\" })),\r\n                                React.createElement(\"a\", { href: \"#\", className: this.state.showCalendar ? \"active\" : \"\", onClick: this.handleToggleCalendar.bind(this, true) }, today.format(\"ddd, MMM Do YYYY\")),\r\n                                React.createElement(\"button\", { className: \"btn btn-link \" + (this.state.loading ? \"disabled\" : \"\"), key: \"next\", style: { visibility: moment_1.default().diff(next) >= 0 ? 'visible' : 'hidden' }, onClick: function (ev) { return _this.handleNext(next, ev); } },\r\n                                    React.createElement(\"span\", { className: \"glyphicon glyphicon-menu-right\" }))),\r\n                            React.createElement(\"div\", { className: \"popover-container \" + (this.state.showCalendar ? \"\" : \"hidden\") },\r\n                                React.createElement(\"div\", { className: \"popover bottom\", ref: \"popover\", style: { display: \"block\", margin: \"0 auto\" } },\r\n                                    React.createElement(\"div\", { className: \"arrow\", style: { left: \"50%\" } }),\r\n                                    React.createElement(\"div\", { className: \"popover-content\" },\r\n                                        React.createElement(react_date_picker_1.default, { maxDate: new Date(), date: today.toDate(), onChange: this.handleDateChange })))),\r\n                            this.renderEntries(),\r\n                            React.createElement(\"hr\", null),\r\n                            this.state.serviceError ? React.createElement(\"div\", { className: \"alert alert-danger\" }, this.state.serviceError) : null,\r\n                            (!this.state.current || this.state.current.entries.length < 7) ?\r\n                                React.createElement(\"form\", { onSubmit: this.handleAddEntry },\r\n                                    React.createElement(\"div\", { className: \"form-group \" + (this.state.errors[\"newEntry\"] ? \"has-error\" : \"\") },\r\n                                        React.createElement(\"label\", { className: \"control-label pull-left\" }, \"Add a new entry (markdown)\"),\r\n                                        React.createElement(\"label\", { className: \"pull-right\" },\r\n                                            React.createElement(Streak_1.default, { flux: this.getFlux(), update: this.refreshStreak })),\r\n                                        React.createElement(\"textarea\", { placeholder: \"New entry...\", className: \"form-control\", rows: 4, style: { width: \"100%\" }, value: this.state.newEntry, onKeyDown: this.handleKeyDown, onBlur: this.handleBlur, maxLength: 500, onChange: function (ev) { return _this.handleTextChange(\"newEntry\", ev); } }),\r\n                                        this.state.errors[\"newEntry\"] ? React.createElement(\"span\", { className: \"help-block\" }, this.state.errors[\"newEntry\"]) : null),\r\n                                    React.createElement(\"button\", { className: \"btn btn-primary \" + ((Object.keys(this.state.errors).length || !this.state.newEntry) ? 'disabled' : ''), type: \"submit\", onClick: this.handleAddEntry }, \"Add\"),\r\n                                    React.createElement(\"span\", { className: \"margin-small\" }, \"(or press ctrl + enter)\")) :\r\n                                React.createElement(\"div\", { className: \"alert alert-info\" },\r\n                                    \"You've got \",\r\n                                    this.state.current.entries.length,\r\n                                    \" entries, that should cover it!\")));\r\n                };\r\n                JournalComponent = __decorate([\r\n                    mobx_react_1.inject('journal'),\r\n                    mobx_react_1.observer\r\n                ], JournalComponent);\r\n                return JournalComponent;\r\n            }(react_1.Component));\r\n            exports_8(\"default\", JournalComponent);\r\n        }\r\n    };\r\n});\r\n/// <reference path='../../typings/browser.d.ts' />\r\n(void 0)(\"components/Forgot\", [\"react\", \"classnames\", \"components/BaseFluxxorComponent\"], function (exports_9, context_9) {\r\n    \"use strict\";\r\n    var __moduleName = context_9 && context_9.id;\r\n    var React, classnames_1, BaseFluxxorComponent_4, emailRegex, ForgotComponent;\r\n    return {\r\n        setters: [\r\n            function (React_5) {\r\n                React = React_5;\r\n            },\r\n            function (classnames_1_1) {\r\n                classnames_1 = classnames_1_1;\r\n            },\r\n            function (BaseFluxxorComponent_4_1) {\r\n                BaseFluxxorComponent_4 = BaseFluxxorComponent_4_1;\r\n            }\r\n        ],\r\n        execute: function () {\r\n            emailRegex = /^([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22)(\\x2e([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22))*\\x40([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d)(\\x2e([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d))*$/;\r\n            ForgotComponent = /** @class */ (function (_super) {\r\n                __extends(ForgotComponent, _super);\r\n                function ForgotComponent() {\r\n                    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n                    _this.onSubmit = function (ev) {\r\n                        ev.preventDefault();\r\n                        if (_this.validate()) {\r\n                            _this.getFlux().actions.account.sendReset(_this.state.email);\r\n                        }\r\n                    };\r\n                    return _this;\r\n                }\r\n                ForgotComponent.prototype.getWatchers = function () { return ['auth']; };\r\n                ForgotComponent.prototype.isValid = function () {\r\n                    return !this.state.errors;\r\n                };\r\n                ForgotComponent.prototype.getStateFromFlux = function () {\r\n                    return {\r\n                        auth: this.getFlux().store(\"auth\"),\r\n                        errors: {},\r\n                        email: ''\r\n                    };\r\n                };\r\n                ForgotComponent.prototype.componentDidMount = function () {\r\n                    this.getFlux().actions.account.clearResults();\r\n                };\r\n                ForgotComponent.prototype.handleTextChange = function (name, ev) {\r\n                    var state = {};\r\n                    state[name] = ev.target.value;\r\n                    this.setState(state);\r\n                };\r\n                ForgotComponent.prototype.validate = function () {\r\n                    var errors = {};\r\n                    if (!emailRegex.test(this.state.email)) {\r\n                        errors[\"email\"] = \"Email is invalid\";\r\n                    }\r\n                    this.setState({ errors: errors });\r\n                    return !Object.keys(errors).length;\r\n                };\r\n                ForgotComponent.prototype.renderErrors = function () {\r\n                    if (this.state.auth.error) {\r\n                        return React.createElement(\"div\", { className: \"alert alert-danger\" }, this.state.auth.error);\r\n                    }\r\n                    return null;\r\n                };\r\n                ForgotComponent.prototype.render = function () {\r\n                    var emailFormClass = classnames_1.default({ \"has-error\": this.state.errors[\"email\"], \"form-group\": true });\r\n                    return React.createElement(\"div\", { className: \"row\" },\r\n                        React.createElement(\"div\", { className: \"col-md-6 col-md-offset-3\" },\r\n                            React.createElement(\"h3\", { className: \"text-center\" }, \"Reset your Password\"),\r\n                            React.createElement(\"br\", null),\r\n                            this.renderErrors(),\r\n                            this.state.auth.sendResetResult.success ?\r\n                                React.createElement(\"div\", null,\r\n                                    React.createElement(\"div\", { className: \"alert alert-success\" }, \"You will receive an email from us shortly if the address you provided is in our system.\"),\r\n                                    React.createElement(\"p\", null,\r\n                                        \"Click \",\r\n                                        React.createElement(\"a\", { href: \"/login\" }, \"here\"),\r\n                                        \" to return to the login page\")) :\r\n                                React.createElement(\"form\", { onSubmit: this.onSubmit.bind(this) },\r\n                                    React.createElement(\"div\", { className: emailFormClass, key: \"1\" },\r\n                                        React.createElement(\"label\", { className: \"control-label\", htmlFor: \"email\" }, \"Email:\"),\r\n                                        React.createElement(\"input\", { className: \"form-control\", id: \"email\", name: \"email\", value: this.state.email, onChange: this.handleTextChange.bind(this, \"email\") }),\r\n                                        this.state.errors[\"email\"] ? React.createElement(\"span\", { className: \"help-block\" }, this.state.errors[\"email\"]) : null),\r\n                                    React.createElement(\"div\", { className: \"text-center\" },\r\n                                        React.createElement(\"button\", { className: \"btn btn-primary\", type: \"submit\" }, \"Send Reset Password Email\"),\r\n                                        React.createElement(\"span\", { className: \"margin-small\" }, \"or\"),\r\n                                        React.createElement(\"a\", { href: \"/login\" }, \"Back to Login\")))));\r\n                };\r\n                return ForgotComponent;\r\n            }(BaseFluxxorComponent_4.default));\r\n            exports_9(\"default\", ForgotComponent);\r\n        }\r\n    };\r\n});\r\n(void 0)(\"components/ResetPassword\", [\"react\", \"models/requests\", \"components/BaseFluxxorComponent\"], function (exports_10, context_10) {\r\n    \"use strict\";\r\n    var __moduleName = context_10 && context_10.id;\r\n    var React, Requests, BaseFluxxorComponent_5, emailRegex, ForgotComponent;\r\n    return {\r\n        setters: [\r\n            function (React_6) {\r\n                React = React_6;\r\n            },\r\n            function (Requests_5) {\r\n                Requests = Requests_5;\r\n            },\r\n            function (BaseFluxxorComponent_5_1) {\r\n                BaseFluxxorComponent_5 = BaseFluxxorComponent_5_1;\r\n            }\r\n        ],\r\n        execute: function () {\r\n            emailRegex = /^([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22)(\\x2e([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22))*\\x40([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d)(\\x2e([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d))*$/;\r\n            ForgotComponent = /** @class */ (function (_super) {\r\n                __extends(ForgotComponent, _super);\r\n                function ForgotComponent() {\r\n                    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n                    _this.onSubmit = function (ev) {\r\n                        ev.preventDefault();\r\n                        if (_this.validate()) {\r\n                            _this.getFlux().actions.account.resetPassword(new Requests.PasswordReset(_this.props.token, _this.state.password));\r\n                        }\r\n                    };\r\n                    return _this;\r\n                }\r\n                ForgotComponent.prototype.getWatchers = function () { return ['auth']; };\r\n                ForgotComponent.prototype.isValid = function () {\r\n                    return !this.state.errors;\r\n                };\r\n                ForgotComponent.prototype.getStateFromFlux = function () {\r\n                    var result = {\r\n                        auth: this.getFlux().store(\"auth\"),\r\n                        errors: {}\r\n                    };\r\n                    return result;\r\n                };\r\n                ForgotComponent.prototype.componentDidMount = function () {\r\n                    this.getFlux().actions.account.clearResults();\r\n                };\r\n                ForgotComponent.prototype.handleTextChange = function (name, ev) {\r\n                    var state = {};\r\n                    state[name] = ev.target.value;\r\n                    this.setState(state);\r\n                };\r\n                ForgotComponent.prototype.validate = function () {\r\n                    var errors = {};\r\n                    if (this.state.confirm != this.state.password) {\r\n                        errors[\"password\"] = \"passwords do not match\";\r\n                        errors[\"confirm\"] = \"passwords do not match\";\r\n                    }\r\n                    else if (!this.state.password || this.state.password.length < 6) {\r\n                        errors[\"password\"] = \"Password needs to be 6 or more characters\";\r\n                    }\r\n                    else if (this.state.password && this.state.password.length > 50) {\r\n                        errors[\"password\"] = \"Password needs to be less than 50 characters\";\r\n                    }\r\n                    this.setState({ errors: errors });\r\n                    return !Object.keys(errors).length;\r\n                };\r\n                ForgotComponent.prototype.renderErrors = function () {\r\n                    if (this.state.auth.error) {\r\n                        return React.createElement(\"div\", { className: \"alert alert-danger\" }, this.state.auth.error);\r\n                    }\r\n                    return null;\r\n                };\r\n                ForgotComponent.prototype.render = function () {\r\n                    return React.createElement(\"div\", { className: \"row\" },\r\n                        React.createElement(\"div\", { className: \"col-md-6 col-md-offset-3\" },\r\n                            React.createElement(\"h3\", { className: \"text-center\" }, \"Reset your Password\"),\r\n                            React.createElement(\"br\", null),\r\n                            this.renderErrors(),\r\n                            this.state.auth.resetPasswordResult.success ?\r\n                                React.createElement(\"div\", null,\r\n                                    React.createElement(\"div\", { className: \"alert alert-success\" },\r\n                                        \"Your password has been reset. Click\",\r\n                                        React.createElement(\"a\", { href: \"/login\" }, \"here\"),\r\n                                        \" to login\")) :\r\n                                React.createElement(\"form\", { onSubmit: this.onSubmit },\r\n                                    React.createElement(\"div\", { className: \"form-group \" + (this.state.errors[\"password\"] ? 'has-error' : ''), key: \"2\" },\r\n                                        React.createElement(\"label\", { className: \"control-label\", htmlFor: \"password\" }, \"Password:\"),\r\n                                        React.createElement(\"input\", { className: \"form-control\", id: \"password\", name: \"password\", type: \"password\", value: this.state.password, onChange: this.handleTextChange.bind(this, \"password\") }),\r\n                                        this.state.errors[\"password\"] ? React.createElement(\"span\", { className: \"help-block\" }, this.state.errors[\"password\"]) : null),\r\n                                    React.createElement(\"div\", { className: \"form-group \" + (this.state.errors[\"confirm\"] ? 'has-error' : ''), key: \"2\" },\r\n                                        React.createElement(\"label\", { className: \"control-label\", htmlFor: \"confirm\" }, \"Confirm Password:\"),\r\n                                        React.createElement(\"input\", { className: \"form-control\", id: \"confirm\", name: \"confirm\", type: \"password\", value: this.state.confirm, onChange: this.handleTextChange.bind(this, \"confirm\") }),\r\n                                        this.state.errors[\"confirm\"] ? React.createElement(\"span\", { className: \"help-block\" }, this.state.errors[\"confirm\"]) : null),\r\n                                    React.createElement(\"div\", { className: \"text-center\" },\r\n                                        React.createElement(\"button\", { className: \"btn btn-primary\", type: \"submit\" }, \"Reset Password\")))));\r\n                };\r\n                return ForgotComponent;\r\n            }(BaseFluxxorComponent_5.default));\r\n            exports_10(\"default\", ForgotComponent);\r\n        }\r\n    };\r\n});\r\n(void 0)(\"components/TopNav\", [\"react\", \"components/BaseFluxxorComponent\"], function (exports_11, context_11) {\r\n    \"use strict\";\r\n    var __moduleName = context_11 && context_11.id;\r\n    var React, BaseFluxxorComponent_6, TopNavComponent;\r\n    return {\r\n        setters: [\r\n            function (React_7) {\r\n                React = React_7;\r\n            },\r\n            function (BaseFluxxorComponent_6_1) {\r\n                BaseFluxxorComponent_6 = BaseFluxxorComponent_6_1;\r\n            }\r\n        ],\r\n        execute: function () {\r\n            TopNavComponent = /** @class */ (function (_super) {\r\n                __extends(TopNavComponent, _super);\r\n                function TopNavComponent() {\r\n                    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n                    _this.handleLogout = function (ev) {\r\n                        ev.preventDefault();\r\n                        _this.getFlux().actions.account.logout();\r\n                    };\r\n                    _this.handleSearch = function (ev) {\r\n                        ev.preventDefault();\r\n                        if (_this.state.query && !_this.state.searching)\r\n                            _this.getFlux().actions.routes.search(_this.state.query, 0);\r\n                    };\r\n                    _this.handleSearchKeyDown = function (ev) {\r\n                        if ((ev.keyCode == 10 || ev.keyCode == 13) && ev.ctrlKey) {\r\n                            _this.handleSearch(ev);\r\n                        }\r\n                    };\r\n                    return _this;\r\n                }\r\n                TopNavComponent.prototype.getWatchers = function () { return ['auth', 'search']; };\r\n                ;\r\n                TopNavComponent.prototype.getStateFromFlux = function () {\r\n                    var store = this.getFlux().store(\"auth\");\r\n                    var search = this.getFlux().store(\"search\");\r\n                    return {\r\n                        isLoggedIn: store.isLoggedIn,\r\n                        email: store.user ? store.user.email : null,\r\n                        searching: search.searching,\r\n                    };\r\n                };\r\n                TopNavComponent.prototype.handleTextChange = function (name, ev) {\r\n                    var state = {};\r\n                    state[name] = ev.target.value;\r\n                    this.setState(state);\r\n                };\r\n                TopNavComponent.prototype.render = function () {\r\n                    return React.createElement(\"nav\", { className: \"navbar navbar-default\" },\r\n                        React.createElement(\"div\", { className: \"container\" },\r\n                            React.createElement(\"div\", { className: \"navbar-header\" },\r\n                                React.createElement(\"button\", { className: \"navbar-toggle collapsed\", data: \"\", \"data-toggle\": \"collapse\", \"data-target\": \"#navbar\" },\r\n                                    React.createElement(\"span\", { className: \"sr-only\" }, \"Toggle Navigation\"),\r\n                                    React.createElement(\"span\", { className: \"icon-bar\", key: \"1\" }),\r\n                                    React.createElement(\"span\", { className: \"icon-bar\", key: \"2\" }),\r\n                                    React.createElement(\"span\", { className: \"icon-bar\", key: \"3\" })),\r\n                                React.createElement(\"a\", { className: \"navbar-brand\", href: \"/journal\" }, \"My Daily Stuff\")),\r\n                            React.createElement(\"div\", { className: \"collapse navbar-collapse navbar-ex1-collapse\", id: \"navbar\" },\r\n                                this.state.isLoggedIn ?\r\n                                    React.createElement(\"form\", { className: \"navbar-form navbar-left\", role: \"search\", onSubmit: this.handleSearch },\r\n                                        React.createElement(\"div\", { className: \"input-group\" },\r\n                                            React.createElement(\"input\", { className: \"form-control\", type: \"search\", placeholder: \"Search\", onChange: this.handleTextChange.bind(this, \"query\"), onKeyDown: this.handleSearchKeyDown }),\r\n                                            React.createElement(\"div\", { className: \"input-group-btn\" },\r\n                                                React.createElement(\"button\", { type: \"submit\", className: \"btn btn-primary \" + (this.state.searching ? 'disabled' : '') },\r\n                                                    React.createElement(\"i\", { className: \"glyphicon glyphicon-search\" }))))) : null,\r\n                                React.createElement(\"ul\", { className: \"nav navbar-nav navbar-right\" },\r\n                                    this.state.isLoggedIn ?\r\n                                        React.createElement(\"li\", { className: \"dropdown\" },\r\n                                            React.createElement(\"a\", { className: \"dropdown-toggle\", \"data-toggle\": \"dropdown\", role: \"button\" },\r\n                                                this.state.email,\r\n                                                React.createElement(\"span\", { className: \"caret\" })),\r\n                                            React.createElement(\"ul\", { className: \"dropdown-menu\", role: \"menu\" },\r\n                                                React.createElement(\"li\", { key: \"1\" },\r\n                                                    React.createElement(\"a\", { href: \"/profile\" }, \"My Profile\")),\r\n                                                React.createElement(\"li\", { key: \"2\" },\r\n                                                    React.createElement(\"a\", { href: \"#\", onClick: this.handleLogout }, \"Logout\")))) :\r\n                                        React.createElement(\"li\", { key: \"Login\" },\r\n                                            React.createElement(\"a\", { href: \"/login\" }, \"Login\")),\r\n                                    this.state.isLoggedIn ? null : React.createElement(\"li\", { key: \"Register\" },\r\n                                        React.createElement(\"a\", { href: \"/register\" }, \"Register\"))))));\r\n                };\r\n                return TopNavComponent;\r\n            }(BaseFluxxorComponent_6.default));\r\n            exports_11(\"default\", TopNavComponent);\r\n        }\r\n    };\r\n});\r\n(void 0)(\"components/App\", [\"react\", \"components/TopNav\"], function (exports_12, context_12) {\r\n    \"use strict\";\r\n    var __moduleName = context_12 && context_12.id;\r\n    var React, TopNav_1, AppComponent;\r\n    return {\r\n        setters: [\r\n            function (React_8) {\r\n                React = React_8;\r\n            },\r\n            function (TopNav_1_1) {\r\n                TopNav_1 = TopNav_1_1;\r\n            }\r\n        ],\r\n        execute: function () {\r\n            AppComponent = /** @class */ (function (_super) {\r\n                __extends(AppComponent, _super);\r\n                function AppComponent() {\r\n                    return _super !== null && _super.apply(this, arguments) || this;\r\n                }\r\n                AppComponent.prototype.render = function () {\r\n                    var Component = this.props.component;\r\n                    return React.createElement(\"div\", null,\r\n                        React.createElement(TopNav_1.default, { flux: this.props.flux }),\r\n                        React.createElement(\"div\", { className: \"container\" },\r\n                            React.createElement(Component, __assign({}, this.props.componentOptions))),\r\n                        React.createElement(\"footer\", { className: \"footer\" },\r\n                            React.createElement(\"div\", { className: \"container\" },\r\n                                React.createElement(\"p\", { className: \"text-muted\" },\r\n                                    \"Created by \",\r\n                                    \" \",\r\n                                    React.createElement(\"a\", { href: \"https://github.com/mikeyoon/\" }, \"Mike Yoon\"),\r\n                                    React.createElement(\"a\", { href: \"/about\", className: \"pull-right\" }, \"About\")))));\r\n                };\r\n                return AppComponent;\r\n            }(React.Component));\r\n            exports_12(\"default\", AppComponent);\r\n        }\r\n    };\r\n});\r\n/// <reference path='../../typings/browser.d.ts' />\r\n(void 0)(\"components/Search\", [\"react\", \"moment\", \"components/BaseFluxxorComponent\"], function (exports_13, context_13) {\r\n    \"use strict\";\r\n    var __moduleName = context_13 && context_13.id;\r\n    var React, moment_2, BaseFluxxorComponent_7, SearchComponent;\r\n    return {\r\n        setters: [\r\n            function (React_9) {\r\n                React = React_9;\r\n            },\r\n            function (moment_2_1) {\r\n                moment_2 = moment_2_1;\r\n            },\r\n            function (BaseFluxxorComponent_7_1) {\r\n                BaseFluxxorComponent_7 = BaseFluxxorComponent_7_1;\r\n            }\r\n        ],\r\n        execute: function () {\r\n            SearchComponent = /** @class */ (function (_super) {\r\n                __extends(SearchComponent, _super);\r\n                function SearchComponent() {\r\n                    return _super !== null && _super.apply(this, arguments) || this;\r\n                }\r\n                SearchComponent.prototype.getWatchers = function () { return ['search']; };\r\n                SearchComponent.prototype.getStateFromFlux = function () {\r\n                    var store = this.getFlux().store(\"search\");\r\n                    return {\r\n                        results: store.searchResults,\r\n                        total: store.total,\r\n                        nextOffset: store.nextOffset,\r\n                        prevOffset: store.prevOffset,\r\n                        offset: store.offset,\r\n                        query: store.query,\r\n                    };\r\n                };\r\n                SearchComponent.prototype.componentWillReceiveProps = function (nextProps) {\r\n                    this.getFlux().actions.search.query(nextProps.query, nextProps.offset);\r\n                };\r\n                SearchComponent.prototype.componentWillMount = function () {\r\n                    this.getFlux().actions.search.query(this.props.query, this.props.offset);\r\n                };\r\n                SearchComponent.prototype.componentWillUnmount = function () {\r\n                    this.getFlux().actions.search.clear();\r\n                };\r\n                SearchComponent.prototype.handlePageLink = function (offset, ev) {\r\n                    if (offset == null) {\r\n                        ev.preventDefault();\r\n                        ev.stopPropagation();\r\n                    }\r\n                };\r\n                SearchComponent.prototype.render = function () {\r\n                    var _this = this;\r\n                    return React.createElement(\"div\", { className: \"row\" }, this.state.query ? React.createElement(\"div\", { className: \"col-md-8 col-md-offset-2\" },\r\n                        React.createElement(\"h4\", null,\r\n                            this.state.total,\r\n                            \" results for \\\"\",\r\n                            this.state.query,\r\n                            \"\\\"\"),\r\n                        React.createElement(\"div\", null, this.state.results.map(function (result, index) {\r\n                            return React.createElement(\"div\", { className: \"panel panel-default\", key: index },\r\n                                React.createElement(\"div\", { className: \"panel-body\" },\r\n                                    index + 1 + _this.state.offset,\r\n                                    \". \",\r\n                                    \" \",\r\n                                    React.createElement(\"a\", { href: \"/journal/\" + moment_2.default(result.date).utc().format('YYYY-M-D') }, moment_2.default(result.date).utc().format('dddd, MMMM Do YYYY'))),\r\n                                React.createElement(\"ul\", { className: \"list-group\" }, result.entries.map(function (entry, ii) { return React.createElement(\"li\", { className: \"list-group-item\", key: ii, dangerouslySetInnerHTML: { __html: entry } }); })));\r\n                        })),\r\n                        React.createElement(\"ul\", { className: \"pager\" },\r\n                            React.createElement(\"li\", { className: \"previous \" + (this.state.prevOffset == null ? 'disabled' : '') },\r\n                                React.createElement(\"a\", { href: \"/search/\" + this.state.query + \"?offset=\" + this.state.prevOffset, onClick: this.handlePageLink.bind(this, this.state.prevOffset), rel: this.state.prevOffset === null ? \"external\" : null },\r\n                                    React.createElement(\"span\", { className: \"glyphicon glyphicon-chevron-left\" }),\r\n                                    \" prev\")),\r\n                            React.createElement(\"li\", { className: \"next \" + (this.state.nextOffset == null ? 'disabled' : '') },\r\n                                React.createElement(\"a\", { href: \"/search/\" + this.state.query + \"?offset=\" + this.state.nextOffset, onClick: this.handlePageLink.bind(this, this.state.nextOffset), rel: this.state.nextOffset === null ? \"external\" : null },\r\n                                    \"next \",\r\n                                    React.createElement(\"span\", { className: \"glyphicon glyphicon-chevron-right\" }))))) :\r\n                        React.createElement(\"div\", { className: \"col-md-8 col-md-offset-2\" },\r\n                            React.createElement(\"div\", { className: \"margin-top-md\" },\r\n                                React.createElement(\"div\", { className: \"progress\" },\r\n                                    React.createElement(\"div\", { className: \"progress-bar progress-bar-striped active\", role: \"progressbar\", style: { width: \"100%\" } })))));\r\n                };\r\n                return SearchComponent;\r\n            }(BaseFluxxorComponent_7.default));\r\n            exports_13(\"default\", SearchComponent);\r\n        }\r\n    };\r\n});\r\n(void 0)(\"components/Profile\", [\"react\", \"models/requests\", \"components/BaseFluxxorComponent\"], function (exports_14, context_14) {\r\n    \"use strict\";\r\n    var __moduleName = context_14 && context_14.id;\r\n    var React, Requests, BaseFluxxorComponent_8, ProfileComponent;\r\n    return {\r\n        setters: [\r\n            function (React_10) {\r\n                React = React_10;\r\n            },\r\n            function (Requests_6) {\r\n                Requests = Requests_6;\r\n            },\r\n            function (BaseFluxxorComponent_8_1) {\r\n                BaseFluxxorComponent_8 = BaseFluxxorComponent_8_1;\r\n            }\r\n        ],\r\n        execute: function () {\r\n            ProfileComponent = /** @class */ (function (_super) {\r\n                __extends(ProfileComponent, _super);\r\n                function ProfileComponent() {\r\n                    return _super !== null && _super.apply(this, arguments) || this;\r\n                }\r\n                ProfileComponent.prototype.getWatchers = function () { return ['auth']; };\r\n                ProfileComponent.prototype.isValid = function () {\r\n                    return !this.state.errors;\r\n                };\r\n                ProfileComponent.prototype.componentDidMount = function () {\r\n                    this.getFlux().actions.account.clearResults();\r\n                };\r\n                ProfileComponent.prototype.getStateFromFlux = function () {\r\n                    var store = this.getFlux().store(\"auth\");\r\n                    var result = {\r\n                        auth: store,\r\n                        email: store.user ? store.user.email : null,\r\n                        password: '',\r\n                        confirm: '',\r\n                        errors: {}\r\n                    };\r\n                    return result;\r\n                };\r\n                ProfileComponent.prototype.onSubmit = function (ev) {\r\n                    ev.preventDefault();\r\n                    if (this.validate()) {\r\n                        if (this.state.confirm == this.state.password) {\r\n                            this.getFlux().actions.account.saveProfile(new Requests.SaveProfile(this.state.password));\r\n                        }\r\n                    }\r\n                };\r\n                ProfileComponent.prototype.handleTextChange = function (name, ev) {\r\n                    var state = {};\r\n                    state[name] = ev.target.value;\r\n                    this.setState(state);\r\n                };\r\n                ProfileComponent.prototype.validate = function () {\r\n                    var errors = {};\r\n                    if (this.state.confirm != this.state.password) {\r\n                        errors[\"password\"] = \"passwords do not match\";\r\n                        errors[\"confirm\"] = \"passwords do not match\";\r\n                    }\r\n                    else if (!this.state.password || this.state.password.length < 6) {\r\n                        errors[\"password\"] = \"Password needs to be 6 or more characters\";\r\n                    }\r\n                    else if (this.state.password && this.state.password.length > 50) {\r\n                        errors[\"password\"] = \"Password needs to be less than 50 characters\";\r\n                    }\r\n                    this.setState({ errors: errors });\r\n                    return !Object.keys(errors).length;\r\n                };\r\n                ProfileComponent.prototype.renderProfileError = function () {\r\n                    if (this.state.auth.error) {\r\n                        return React.createElement(\"div\", { className: \"alert alert-danger\" }, this.state.auth.error);\r\n                    }\r\n                    return null;\r\n                };\r\n                ProfileComponent.prototype.render = function () {\r\n                    return React.createElement(\"div\", { className: \"row\" },\r\n                        React.createElement(\"div\", { className: \"col-md-6 col-md-offset-3\" },\r\n                            React.createElement(\"h3\", { className: \"text-center\" }, \"Update Your Profile\"),\r\n                            React.createElement(\"br\", null),\r\n                            this.renderProfileError(),\r\n                            this.state.auth.saveProfileResult.success ? React.createElement(\"div\", { className: \"alert alert-success\" }, \"Profile Updated Successfully\") : null,\r\n                            React.createElement(\"form\", { onSubmit: this.onSubmit.bind(this) },\r\n                                React.createElement(\"div\", { className: \"form-group\", key: \"1\" },\r\n                                    React.createElement(\"label\", { className: \"control-label\", htmlFor: \"email\" }, \"Email:\"),\r\n                                    React.createElement(\"input\", { className: \"form-control\", id: \"email\", name: \"email\", defaultValue: this.state.email, disabled: true })),\r\n                                React.createElement(\"div\", { className: \"form-group \" + (this.state.errors[\"password\"] ? 'has-error' : ''), key: \"2\" },\r\n                                    React.createElement(\"label\", { className: \"control-label\", htmlFor: \"password\" }, \"Password:\"),\r\n                                    React.createElement(\"input\", { className: \"form-control\", id: \"password\", name: \"password\", type: \"password\", value: this.state.password, onChange: this.handleTextChange.bind(this, \"password\") }),\r\n                                    this.state.errors[\"password\"] ? React.createElement(\"span\", { className: \"help-block\" }, this.state.errors[\"password\"]) : null),\r\n                                React.createElement(\"div\", { className: \"form-group \" + (this.state.errors[\"confirm\"] ? 'has-error' : ''), key: \"3\" },\r\n                                    React.createElement(\"label\", { className: \"control-label\", htmlFor: \"password\" }, \"Confirm Password:\"),\r\n                                    React.createElement(\"input\", { className: \"form-control\", id: \"confirm\", name: \"confirm\", type: \"password\", value: this.state.confirm, onChange: this.handleTextChange.bind(this, \"confirm\") }),\r\n                                    this.state.errors[\"confirm\"] ? React.createElement(\"span\", { className: \"help-block\" }, this.state.errors[\"confirm\"]) : null),\r\n                                React.createElement(\"div\", { className: \"text-center\" },\r\n                                    React.createElement(\"button\", { className: \"btn btn-primary\", type: \"submit\" }, \"Save Changes\")))));\r\n                };\r\n                return ProfileComponent;\r\n            }(BaseFluxxorComponent_8.default));\r\n            exports_14(\"default\", ProfileComponent);\r\n        }\r\n    };\r\n});\r\n/**\r\n * Created by myoon on 6/4/2015.\r\n */\r\n(void 0)(\"components/About\", [\"react\"], function (exports_15, context_15) {\r\n    \"use strict\";\r\n    var __moduleName = context_15 && context_15.id;\r\n    var React, AboutComponent;\r\n    return {\r\n        setters: [\r\n            function (React_11) {\r\n                React = React_11;\r\n            }\r\n        ],\r\n        execute: function () {\r\n            AboutComponent = /** @class */ (function (_super) {\r\n                __extends(AboutComponent, _super);\r\n                function AboutComponent() {\r\n                    return _super !== null && _super.apply(this, arguments) || this;\r\n                }\r\n                AboutComponent.prototype.render = function () {\r\n                    return React.createElement(\"div\", { className: \"row\" },\r\n                        React.createElement(\"div\", { className: \"col-md-8 col-md-offset-2\" },\r\n                            React.createElement(\"h1\", { className: \"page-header\" }, \"About\"),\r\n                            React.createElement(\"div\", { key: \"about\" },\r\n                                \"MyDailyStuff is designed as a simplified tool for journaling your daily activities. The basic premise is that by keeping track of three things you do each day, you can have more interesting conversations with others. It was inspired by \",\r\n                                \" \",\r\n                                React.createElement(\"a\", { href: \"http://www.reddit.com/r/LifeProTips/comments/2chg5w/lpt_be_more_exciting_to_peoplefriendsdates_and/\" }, \"this\"),\r\n                                \" \",\r\n                                \" reddit thread.\"),\r\n                            React.createElement(\"h3\", null, \"Development\"),\r\n                            React.createElement(\"div\", { key: \"dev\" }, \"I wrote this application to learn Go and Typescript. All the source code is available at github (link in the left side of the footer). It is powered on the backend using ElasticSearch and Martini. The frontend is React and Fluxxor with the stereotypical bootstrap styling. The Go backend has a fairly comprehensive set of automated tests.\")));\r\n                };\r\n                return AboutComponent;\r\n            }(React.Component));\r\n            exports_15(\"default\", AboutComponent);\r\n        }\r\n    };\r\n});\r\n(void 0)(\"stores/client\", [\"rest\", \"rest/interceptor/mime\", \"rest/interceptor/errorCode\", \"rest/interceptor/csrf\"], function (exports_16, context_16) {\r\n    \"use strict\";\r\n    var __moduleName = context_16 && context_16.id;\r\n    var rest_1, mime_1, errorCode_1, csrf_1, CSRF_HEADER, client, csrfToken, RestClient;\r\n    return {\r\n        setters: [\r\n            function (rest_1_1) {\r\n                rest_1 = rest_1_1;\r\n            },\r\n            function (mime_1_1) {\r\n                mime_1 = mime_1_1;\r\n            },\r\n            function (errorCode_1_1) {\r\n                errorCode_1 = errorCode_1_1;\r\n            },\r\n            function (csrf_1_1) {\r\n                csrf_1 = csrf_1_1;\r\n            }\r\n        ],\r\n        execute: function () {\r\n            CSRF_HEADER = \"X-Csrf-Token\";\r\n            client = rest_1.default.wrap(mime_1.default).wrap(errorCode_1.default).wrap(csrf_1.default);\r\n            csrfToken = '';\r\n            (function (RestClient) {\r\n                function get(url) {\r\n                    return client({\r\n                        method: 'GET',\r\n                        path: url\r\n                    }).then(function (response) { return csrfToken = response.headers[CSRF_HEADER]; });\r\n                }\r\n                RestClient.get = get;\r\n                function del(url) {\r\n                    return client({\r\n                        method: 'DELETE',\r\n                        path: url\r\n                    }).then(function (response) { return csrfToken = response.headers[CSRF_HEADER]; });\r\n                }\r\n                RestClient.del = del;\r\n                function post(url, entity) {\r\n                    return client({\r\n                        method: 'POST',\r\n                        path: url,\r\n                        entity: JSON.stringify(entity)\r\n                    }).then(function (response) { return csrfToken = response.headers[CSRF_HEADER]; });\r\n                }\r\n                RestClient.post = post;\r\n                function put(url, entity) {\r\n                    return client({\r\n                        method: 'PUT',\r\n                        path: url,\r\n                        entity: JSON.stringify(entity)\r\n                    }).then(function (response) { return csrfToken = response.headers[CSRF_HEADER]; });\r\n                }\r\n                RestClient.put = put;\r\n            })(RestClient || (RestClient = {}));\r\n            exports_16(\"RestClient\", RestClient);\r\n        }\r\n    };\r\n});\r\n(void 0)(\"stores/auth\", [\"mobx\", \"stores/client\", \"page\", \"moment\"], function (exports_17, context_17) {\r\n    \"use strict\";\r\n    var __moduleName = context_17 && context_17.id;\r\n    var mobx_1, client_1, page_2, moment_3, AuthStore;\r\n    return {\r\n        setters: [\r\n            function (mobx_1_1) {\r\n                mobx_1 = mobx_1_1;\r\n            },\r\n            function (client_1_1) {\r\n                client_1 = client_1_1;\r\n            },\r\n            function (page_2_1) {\r\n                page_2 = page_2_1;\r\n            },\r\n            function (moment_3_1) {\r\n                moment_3 = moment_3_1;\r\n            }\r\n        ],\r\n        execute: function () {\r\n            AuthStore = /** @class */ (function () {\r\n                function AuthStore() {\r\n                    this.loggingIn = false;\r\n                    this.isLoggedIn = false;\r\n                    this.streakLoading = false;\r\n                    this.sendingReset = false;\r\n                    this.gettingAccount = false;\r\n                    this.registering = false;\r\n                    this.saving = false;\r\n                }\r\n                AuthStore.prototype.getStreak = function () {\r\n                    var _this = this;\r\n                    this.streakLoading = true;\r\n                    client_1.RestClient\r\n                        .get(\"/api/account/streak/\" + moment_3.default(new Date()).format(\"YYYY-M-D\"))\r\n                        .then(function (response) {\r\n                        var streak = response.entity.result;\r\n                        _this.streak = streak;\r\n                    })\r\n                        .catch(function (err) {\r\n                        console.error(err);\r\n                        _this.streak = undefined;\r\n                    })\r\n                        .finally(function () { return _this.streakLoading = false; });\r\n                };\r\n                AuthStore.prototype.getAccount = function () {\r\n                    var _this = this;\r\n                    this.gettingAccount = true;\r\n                    client_1.RestClient.get(\"/api/account\")\r\n                        .then(function (response) {\r\n                        if (response.entity.success) {\r\n                            _this.isLoggedIn = true;\r\n                            _this.email = response.entity.result.email;\r\n                            _this.user_id = response.entity.result.user_id;\r\n                        }\r\n                        else {\r\n                            _this.isLoggedIn = false;\r\n                        }\r\n                    })\r\n                        .catch(function (err) { return _this.getAccountError = err.message; })\r\n                        .finally(function () { return _this.gettingAccount = false; });\r\n                };\r\n                AuthStore.prototype.clearPasswordReset = function () {\r\n                    this.sendingReset = false;\r\n                    this.resetError = undefined;\r\n                };\r\n                AuthStore.prototype.requestReset = function (email) {\r\n                    var _this = this;\r\n                    this.sendingReset = true;\r\n                    this.resetError = undefined;\r\n                    client_1.RestClient.post(\"/api/account/forgot/\" + email)\r\n                        .then(function (response) {\r\n                        var result = response.entity;\r\n                        _this.resetSuccess = result.success;\r\n                        _this.resetError = result.error;\r\n                    })\r\n                        .catch(function (response) { return _this.resetError = \"Error contacting server. Please try again later.\"; })\r\n                        .finally(function () { return _this.sendingReset = false; });\r\n                };\r\n                AuthStore.prototype.resetPassword = function (request) {\r\n                    var _this = this;\r\n                    this.sendingReset = true;\r\n                    this.resetError = undefined;\r\n                    client_1.RestClient.post(\"/api/account/reset/\", request)\r\n                        .then(function (response) {\r\n                        if (response.entity.success) {\r\n                        }\r\n                        else {\r\n                            _this.resetError = response.entity.error;\r\n                        }\r\n                    })\r\n                        .catch(function (err) { return _this.resetError = err.message; })\r\n                        .finally(function () { return _this.sendingReset = false; });\r\n                };\r\n                AuthStore.prototype.login = function (info) {\r\n                    var _this = this;\r\n                    this.loggingIn = true;\r\n                    this.loginError = undefined;\r\n                    client_1.RestClient.post(\"/api/account/login\", info)\r\n                        .then(function (response) {\r\n                        if (response.entity.success) {\r\n                            _this.isLoggedIn = true;\r\n                            // GetAccount\r\n                            page_2.default('/journal');\r\n                        }\r\n                        else {\r\n                            _this.loginError = response.entity.error;\r\n                        }\r\n                    })\r\n                        .catch(function (response) { return _this.loginError = \"Error contacting server. Please try again later.\"; })\r\n                        .finally(function () { return _this.loggingIn = false; });\r\n                };\r\n                AuthStore.prototype.logout = function () {\r\n                    var _this = this;\r\n                    client_1.RestClient.post(\"/api/account/logout\")\r\n                        .then(function (response) {\r\n                        if (response.entity.success) {\r\n                            _this.isLoggedIn = false;\r\n                            _this.email = undefined;\r\n                            _this.user_id = undefined;\r\n                            page_2.default('/login');\r\n                        }\r\n                    });\r\n                };\r\n                AuthStore.prototype.register = function (request) {\r\n                    var _this = this;\r\n                    this.registering = false;\r\n                    this.registerError = undefined;\r\n                    client_1.RestClient.post(\"/api/account/register\", request)\r\n                        .then(function (response) {\r\n                        if (!response.entity.success) {\r\n                            _this.registerError = response.entity.error;\r\n                        }\r\n                    })\r\n                        .catch(function (err) { return _this.registerError = err.message; })\r\n                        .finally(function () { return _this.registering = false; });\r\n                };\r\n                AuthStore.prototype.verify = function (token) {\r\n                    var _this = this;\r\n                    client_1.RestClient.get(\"/api/account/verify/\" + token)\r\n                        .then(function (response) {\r\n                        if (response.entity.success) {\r\n                            _this.isLoggedIn = true;\r\n                            _this.getAccount();\r\n                            page_2.default('/journal');\r\n                        }\r\n                    })\r\n                        .catch(function (err) { return page_2.default('/login'); });\r\n                };\r\n                AuthStore.prototype.updateProfile = function (request) {\r\n                    var _this = this;\r\n                    this.saving = true;\r\n                    this.saveError = undefined;\r\n                    client_1.RestClient.put('/api/account', request)\r\n                        .then(function (response) {\r\n                        if (!response.entity.success) {\r\n                            _this.saveError = response.entity.error;\r\n                        }\r\n                    })\r\n                        .catch(function (err) { return _this.saveError = err.message; })\r\n                        .finally(function () { return _this.saving = false; });\r\n                };\r\n                __decorate([\r\n                    mobx_1.observable\r\n                ], AuthStore.prototype, \"loggingIn\", void 0);\r\n                __decorate([\r\n                    mobx_1.observable\r\n                ], AuthStore.prototype, \"isLoggedIn\", void 0);\r\n                __decorate([\r\n                    mobx_1.observable\r\n                ], AuthStore.prototype, \"loginError\", void 0);\r\n                __decorate([\r\n                    mobx_1.observable\r\n                ], AuthStore.prototype, \"streakLoading\", void 0);\r\n                __decorate([\r\n                    mobx_1.observable\r\n                ], AuthStore.prototype, \"streak\", void 0);\r\n                __decorate([\r\n                    mobx_1.observable\r\n                ], AuthStore.prototype, \"streakError\", void 0);\r\n                __decorate([\r\n                    mobx_1.observable\r\n                ], AuthStore.prototype, \"sendingReset\", void 0);\r\n                __decorate([\r\n                    mobx_1.observable\r\n                ], AuthStore.prototype, \"resetError\", void 0);\r\n                __decorate([\r\n                    mobx_1.observable\r\n                ], AuthStore.prototype, \"resetSuccess\", void 0);\r\n                __decorate([\r\n                    mobx_1.observable\r\n                ], AuthStore.prototype, \"gettingAccount\", void 0);\r\n                __decorate([\r\n                    mobx_1.observable\r\n                ], AuthStore.prototype, \"getAccountError\", void 0);\r\n                __decorate([\r\n                    mobx_1.observable\r\n                ], AuthStore.prototype, \"email\", void 0);\r\n                __decorate([\r\n                    mobx_1.observable\r\n                ], AuthStore.prototype, \"user_id\", void 0);\r\n                __decorate([\r\n                    mobx_1.observable\r\n                ], AuthStore.prototype, \"registering\", void 0);\r\n                __decorate([\r\n                    mobx_1.observable\r\n                ], AuthStore.prototype, \"registerError\", void 0);\r\n                __decorate([\r\n                    mobx_1.observable\r\n                ], AuthStore.prototype, \"saving\", void 0);\r\n                __decorate([\r\n                    mobx_1.observable\r\n                ], AuthStore.prototype, \"saveError\", void 0);\r\n                return AuthStore;\r\n            }());\r\n            exports_17(\"AuthStore\", AuthStore);\r\n        }\r\n    };\r\n});\r\n(void 0)(\"stores/journal\", [\"moment\", \"stores/client\"], function (exports_18, context_18) {\r\n    \"use strict\";\r\n    var __moduleName = context_18 && context_18.id;\r\n    var moment_4, client_2, JournalStore;\r\n    return {\r\n        setters: [\r\n            function (moment_4_1) {\r\n                moment_4 = moment_4_1;\r\n            },\r\n            function (client_2_1) {\r\n                client_2 = client_2_1;\r\n            }\r\n        ],\r\n        execute: function () {\r\n            JournalStore = /** @class */ (function () {\r\n                function JournalStore() {\r\n                    this.editing = false;\r\n                    this.adding = false;\r\n                    this.loading = false;\r\n                    this.deleting = false;\r\n                    this.started = false; //Whether the journal page has loaded\r\n                    this.hasEntry = false;\r\n                    this.showCalendar = false;\r\n                }\r\n                JournalStore.prototype.add = function (entry) {\r\n                    var _this = this;\r\n                    this.adding = true;\r\n                    this.error = undefined;\r\n                    client_2.RestClient.post(\"/api/journal\", {\r\n                        entries: [entry],\r\n                        date: moment_4.default(this.date).format(\"YYYY-M-D\")\r\n                    })\r\n                        .then(function (response) {\r\n                        _this.adding = false;\r\n                        if (response.entity.success) {\r\n                            _this.current = response.entity.result;\r\n                            _this.hasEntry = true;\r\n                        }\r\n                        else {\r\n                            _this.error = response.entity.error;\r\n                        }\r\n                    })\r\n                        .catch(function (err) { return _this.error = err.message; })\r\n                        .finally(function () { return _this.adding = false; });\r\n                };\r\n                JournalStore.prototype.edit = function (req) {\r\n                    var _this = this;\r\n                    this.editing = true;\r\n                    this.error = undefined;\r\n                    if (this.current == null) {\r\n                        return;\r\n                    }\r\n                    var entries = this.current.entries.slice(0);\r\n                    if (!req.entry) {\r\n                        entries.splice(req.index, 1);\r\n                    }\r\n                    else {\r\n                        entries[req.index] = req.entry;\r\n                    }\r\n                    client_2.RestClient.put(\"/api/journal/\" + this.current.id, {\r\n                        entries: entries\r\n                    })\r\n                        .then(function (response) {\r\n                        _this.editing = false;\r\n                        if (response.entity.success) {\r\n                            //We're relying on the current to be updated client-side due to delays in indexing in ES\r\n                            if (_this.current != null) {\r\n                                _this.current.entries = entries;\r\n                            }\r\n                            else {\r\n                                _this.error = \"Something went wrong, please refresh\";\r\n                            }\r\n                        }\r\n                        else {\r\n                            _this.error = response.entity.error;\r\n                        }\r\n                    })\r\n                        .catch(function (err) { return _this.error = err.message; })\r\n                        .finally(function () { return _this.editing = false; });\r\n                };\r\n                JournalStore.prototype.delete = function () {\r\n                    var _this = this;\r\n                    this.deleting = true;\r\n                    this.error = undefined;\r\n                    if (this.current == null) {\r\n                        return;\r\n                    }\r\n                    client_2.RestClient.del(\"/api/journal/\" + this.current.id)\r\n                        .then(function (response) {\r\n                        if (response.entity.success) {\r\n                            _this.hasEntry = false;\r\n                            _this.current = null;\r\n                        }\r\n                        else {\r\n                            _this.error = response.entity.error;\r\n                        }\r\n                    })\r\n                        .catch(function (err) { return _this.error = err.message; })\r\n                        .finally(function () { return _this.deleting = false; });\r\n                };\r\n                JournalStore.prototype.get = function (date) {\r\n                    var _this = this;\r\n                    this.loading = true;\r\n                    this.error = undefined;\r\n                    client_2.RestClient.get(\"/api/journal/\" + moment_4.default(date).format(\"YYYY-M-D\"))\r\n                        .then(function (response) {\r\n                        _this.loading = false;\r\n                        _this.date = date;\r\n                        _this.started = true;\r\n                        _this.showCalendar = false;\r\n                        if (response.entity.success) {\r\n                            _this.current = response.entity.result;\r\n                            _this.hasEntry = true;\r\n                        }\r\n                        else {\r\n                            _this.hasEntry = false;\r\n                            _this.current = null;\r\n                        }\r\n                    })\r\n                        .catch(function (err) {\r\n                        _this.started = true;\r\n                        _this.loading = false;\r\n                        _this.showCalendar = false;\r\n                        _this.hasEntry = false;\r\n                        _this.current = null;\r\n                        _this.error = err.message;\r\n                    })\r\n                        .finally(function () { return _this.loading = false; });\r\n                };\r\n                JournalStore.prototype.toggleCalendar = function (show) {\r\n                    this.showCalendar = show;\r\n                };\r\n                return JournalStore;\r\n            }());\r\n            exports_18(\"JournalStore\", JournalStore);\r\n        }\r\n    };\r\n});\r\n(void 0)(\"stores/search\", [\"mobx\", \"moment\", \"stores/client\"], function (exports_19, context_19) {\r\n    \"use strict\";\r\n    var __moduleName = context_19 && context_19.id;\r\n    var mobx_2, moment_5, client_3, LIMIT, SearchStore;\r\n    return {\r\n        setters: [\r\n            function (mobx_2_1) {\r\n                mobx_2 = mobx_2_1;\r\n            },\r\n            function (moment_5_1) {\r\n                moment_5 = moment_5_1;\r\n            },\r\n            function (client_3_1) {\r\n                client_3 = client_3_1;\r\n            }\r\n        ],\r\n        execute: function () {\r\n            LIMIT = 10;\r\n            SearchStore = /** @class */ (function () {\r\n                function SearchStore() {\r\n                    this.query = '';\r\n                    this.lastQuery = '';\r\n                    this.searching = false;\r\n                    this.searchResults = [];\r\n                    this.dates = [];\r\n                }\r\n                Object.defineProperty(SearchStore.prototype, \"monthYear\", {\r\n                    get: function () {\r\n                        return this.month + '-' + this.year;\r\n                    },\r\n                    enumerable: true,\r\n                    configurable: true\r\n                });\r\n                SearchStore.prototype.clear = function () {\r\n                    this.query = \"\";\r\n                    this.total = 0;\r\n                    this.nextOffset = 0;\r\n                    this.prevOffset = 0;\r\n                    this.searchResults = [];\r\n                };\r\n                SearchStore.prototype.searchByMonth = function (date) {\r\n                    var _this = this;\r\n                    var month = date.getMonth() + 1;\r\n                    var year = date.getFullYear();\r\n                    if (this.month !== month || this.year !== year) {\r\n                        client_3.RestClient.post(\"/api/search/date\", {\r\n                            start: year + '-' + month + '-1',\r\n                            end: moment_5.default(year + '-' + month + '-1', 'YYYY-M-D').add(1, 'months').format('YYYY-M-D')\r\n                        })\r\n                            .then(function (response) {\r\n                            if (response.entity.success) {\r\n                                _this.dates = response.entity.result;\r\n                                _this.month = month;\r\n                                _this.year = year;\r\n                            }\r\n                            else {\r\n                                _this.searchError = response.entity.error;\r\n                            }\r\n                        });\r\n                    }\r\n                };\r\n                SearchStore.prototype.search = function (request) {\r\n                    var _this = this;\r\n                    this.searching = true;\r\n                    //Set query after the change so it won't update until after the request completes\r\n                    // this.offset = req.offset;\r\n                    client_3.RestClient.post(\"/api/search/\", {\r\n                        query: this.query,\r\n                        offset: request.offset,\r\n                        limit: LIMIT,\r\n                    }).then(function (response) {\r\n                        if (response.entity.success) {\r\n                            _this.searchResults = response.entity.result\r\n                                .map(function (r) { return ({\r\n                                entries: r.entries,\r\n                                id: r.id,\r\n                                date: r.date\r\n                            }); });\r\n                            _this.total = response.entity.total || 0;\r\n                            _this.searching = false;\r\n                            _this.nextOffset = (request.offset + LIMIT) < (_this.total || 0) ? request.offset + LIMIT : undefined;\r\n                            _this.prevOffset = request.offset > 0 ? request.offset - LIMIT : undefined;\r\n                        }\r\n                    })\r\n                        .catch(function (err) {\r\n                        _this.nextOffset = undefined;\r\n                        _this.prevOffset = undefined;\r\n                    })\r\n                        .finally(function () { return _this.searching = false; });\r\n                };\r\n                __decorate([\r\n                    mobx_2.observable\r\n                ], SearchStore.prototype, \"searchError\", void 0);\r\n                __decorate([\r\n                    mobx_2.observable\r\n                ], SearchStore.prototype, \"searchResults\", void 0);\r\n                __decorate([\r\n                    mobx_2.observable\r\n                ], SearchStore.prototype, \"dates\", void 0);\r\n                __decorate([\r\n                    mobx_2.observable\r\n                ], SearchStore.prototype, \"query\", void 0);\r\n                __decorate([\r\n                    mobx_2.observable\r\n                ], SearchStore.prototype, \"lastQuery\", void 0);\r\n                __decorate([\r\n                    mobx_2.observable\r\n                ], SearchStore.prototype, \"searching\", void 0);\r\n                __decorate([\r\n                    mobx_2.observable\r\n                ], SearchStore.prototype, \"total\", void 0);\r\n                __decorate([\r\n                    mobx_2.observable\r\n                ], SearchStore.prototype, \"nextOffset\", void 0);\r\n                __decorate([\r\n                    mobx_2.observable\r\n                ], SearchStore.prototype, \"prevOffset\", void 0);\r\n                __decorate([\r\n                    mobx_2.observable\r\n                ], SearchStore.prototype, \"offset\", void 0);\r\n                __decorate([\r\n                    mobx_2.observable\r\n                ], SearchStore.prototype, \"month\", void 0);\r\n                __decorate([\r\n                    mobx_2.observable\r\n                ], SearchStore.prototype, \"year\", void 0);\r\n                __decorate([\r\n                    mobx_2.computed\r\n                ], SearchStore.prototype, \"monthYear\", null);\r\n                return SearchStore;\r\n            }());\r\n            exports_19(\"SearchStore\", SearchStore);\r\n        }\r\n    };\r\n});\r\n(void 0)(\"stores/route\", [\"mobx\", \"page\"], function (exports_20, context_20) {\r\n    \"use strict\";\r\n    var __moduleName = context_20 && context_20.id;\r\n    var mobx_3, page_3, Routes, RouteStore;\r\n    return {\r\n        setters: [\r\n            function (mobx_3_1) {\r\n                mobx_3 = mobx_3_1;\r\n            },\r\n            function (page_3_1) {\r\n                page_3 = page_3_1;\r\n            }\r\n        ],\r\n        execute: function () {\r\n            (function (Routes) {\r\n                Routes[Routes[\"Journal\"] = 0] = \"Journal\";\r\n                Routes[Routes[\"Login\"] = 1] = \"Login\";\r\n                Routes[Routes[\"Home\"] = 2] = \"Home\";\r\n                Routes[Routes[\"Register\"] = 3] = \"Register\";\r\n                Routes[Routes[\"Profile\"] = 4] = \"Profile\";\r\n                Routes[Routes[\"ForgotPassword\"] = 5] = \"ForgotPassword\";\r\n            })(Routes || (Routes = {}));\r\n            exports_20(\"Routes\", Routes);\r\n            RouteStore = /** @class */ (function () {\r\n                function RouteStore() {\r\n                    this.route = '';\r\n                    page_3.default.start();\r\n                }\r\n                RouteStore.prototype.search = function (req) {\r\n                    page_3.default('/search/' + req.query + \"?offset=\" + req.offset);\r\n                };\r\n                RouteStore.prototype.updateRoute = function (route) {\r\n                    this.route = route;\r\n                };\r\n                __decorate([\r\n                    mobx_3.observable\r\n                ], RouteStore.prototype, \"route\", void 0);\r\n                return RouteStore;\r\n            }());\r\n            exports_20(\"RouteStore\", RouteStore);\r\n        }\r\n    };\r\n});\r\n(void 0)(\"stores/analytics\", [\"actions\", \"moment\"], function (exports_21, context_21) {\r\n    \"use strict\";\r\n    var __moduleName = context_21 && context_21.id;\r\n    function trackEvent(category, action, label, value, nonInteraction) {\r\n        _gaq.push(['_trackEvent', category, action, label, value, nonInteraction]);\r\n    }\r\n    var actions_1, moment_6, AnalyticsStore;\r\n    return {\r\n        setters: [\r\n            function (actions_1_1) {\r\n                actions_1 = actions_1_1;\r\n            },\r\n            function (moment_6_1) {\r\n                moment_6 = moment_6_1;\r\n            }\r\n        ],\r\n        execute: function () {\r\n            AnalyticsStore = Fluxxor.createStore({\r\n                initialize: function () {\r\n                    this.enabled = typeof _gaq !== 'undefined';\r\n                    console.log('GA Enabled: ' + this.enabled);\r\n                    if (this.enabled) {\r\n                        this.bindActions(actions_1.default.constants.ACCOUNT.LOGIN, this.onLogin, actions_1.default.constants.ACCOUNT.PROFILE, this.onProfile, actions_1.default.constants.ACCOUNT.REGISTER, this.onRegister, actions_1.default.constants.ACCOUNT.LOGOUT, this.onLogout, actions_1.default.constants.ACCOUNT.VERIFY, this.onVerify, actions_1.default.constants.ACCOUNT.RESET_PASSWORD, this.onReset, actions_1.default.constants.ACCOUNT.SEND_RESET, this.onSendReset, actions_1.default.constants.ACCOUNT.SAVE_PROFILE, this.onSaveProfile, actions_1.default.constants.ACCOUNT.CLEAR_STORE, this.onClearStore, actions_1.default.constants.JOURNAL.GET, this.onJournalGet, actions_1.default.constants.JOURNAL.ADD, this.onJournalAdd, actions_1.default.constants.JOURNAL.EDIT, this.onJournalEdit, actions_1.default.constants.JOURNAL.DELETE, this.onJournalDelete, actions_1.default.constants.SEARCH.DATE, this.onSearchDate, actions_1.default.constants.SEARCH.QUERY, this.onSearchQuery);\r\n                    }\r\n                },\r\n                onLogin: function (payload) {\r\n                    trackEvent('account', 'login');\r\n                },\r\n                onProfile: function () {\r\n                    trackEvent('account', 'profile');\r\n                },\r\n                onLogout: function () {\r\n                    trackEvent('account', 'logout');\r\n                },\r\n                onRegister: function (payload) {\r\n                    trackEvent('account', 'register');\r\n                },\r\n                onVerify: function (token) {\r\n                    trackEvent('account', 'verify');\r\n                },\r\n                onSendReset: function (email) {\r\n                    trackEvent('account', 'send_reset');\r\n                },\r\n                onReset: function (payload) {\r\n                    trackEvent('account', 'reset_password');\r\n                },\r\n                onSaveProfile: function (payload) {\r\n                    trackEvent('account', 'update_profile');\r\n                },\r\n                onClearStore: function () {\r\n                },\r\n                onJournalAdd: function (entry) {\r\n                    trackEvent('journal', 'add');\r\n                },\r\n                onJournalEdit: function (entry) {\r\n                    trackEvent('journal', 'edit');\r\n                },\r\n                onJournalGet: function (date) {\r\n                    trackEvent('journal', 'get', moment_6.default(date).format(\"MM-DD-YYYY\"));\r\n                },\r\n                onJournalDelete: function () {\r\n                    trackEvent('journal', 'delete');\r\n                },\r\n                onSearchDate: function (date) {\r\n                    //_trackEvent('journal', 'delete');\r\n                },\r\n                onSearchQuery: function (query) {\r\n                    trackEvent('search', 'query', query);\r\n                }\r\n            });\r\n            exports_21(\"default\", AnalyticsStore);\r\n        }\r\n    };\r\n});\r\n(void 0)(\"index\", [\"react\", \"page\", \"actions\", \"moment\", \"react-dom\", \"components/Login\", \"components/Signup\", \"components/Journal\", \"components/Forgot\", \"components/ResetPassword\", \"components/App\", \"components/Search\", \"components/Profile\", \"components/About\", \"stores/auth\", \"stores/journal\", \"stores/search\", \"stores/route\", \"stores/analytics\"], function (exports_22, context_22) {\r\n    \"use strict\";\r\n    var __moduleName = context_22 && context_22.id;\r\n    //flux.on(\"dispatch\", function(type: string, payload: any) {\r\n    //    console.log(\"Dispatch:\", type, payload);\r\n    //});\r\n    function renderApp(component, options) {\r\n        var routeElement = React.createElement(App_1.default, { flux: flux, component: component, componentOptions: options });\r\n        var root = document.getElementById('content-root');\r\n        if (root != null) {\r\n            DOM.render(routeElement, root);\r\n        }\r\n    }\r\n    var React, page_4, actions_2, moment_7, DOM, Login_1, Signup_1, Journal_1, Forgot_1, ResetPassword_1, App_1, Search_1, Profile_1, About_1, auth_1, journal_1, search_1, route_1, analytics_1, stores, flux;\r\n    return {\r\n        setters: [\r\n            function (React_12) {\r\n                React = React_12;\r\n            },\r\n            function (page_4_1) {\r\n                page_4 = page_4_1;\r\n            },\r\n            function (actions_2_1) {\r\n                actions_2 = actions_2_1;\r\n            },\r\n            function (moment_7_1) {\r\n                moment_7 = moment_7_1;\r\n            },\r\n            function (DOM_1) {\r\n                DOM = DOM_1;\r\n            },\r\n            function (Login_1_1) {\r\n                Login_1 = Login_1_1;\r\n            },\r\n            function (Signup_1_1) {\r\n                Signup_1 = Signup_1_1;\r\n            },\r\n            function (Journal_1_1) {\r\n                Journal_1 = Journal_1_1;\r\n            },\r\n            function (Forgot_1_1) {\r\n                Forgot_1 = Forgot_1_1;\r\n            },\r\n            function (ResetPassword_1_1) {\r\n                ResetPassword_1 = ResetPassword_1_1;\r\n            },\r\n            function (App_1_1) {\r\n                App_1 = App_1_1;\r\n            },\r\n            function (Search_1_1) {\r\n                Search_1 = Search_1_1;\r\n            },\r\n            function (Profile_1_1) {\r\n                Profile_1 = Profile_1_1;\r\n            },\r\n            function (About_1_1) {\r\n                About_1 = About_1_1;\r\n            },\r\n            function (auth_1_1) {\r\n                auth_1 = auth_1_1;\r\n            },\r\n            function (journal_1_1) {\r\n                journal_1 = journal_1_1;\r\n            },\r\n            function (search_1_1) {\r\n                search_1 = search_1_1;\r\n            },\r\n            function (route_1_1) {\r\n                route_1 = route_1_1;\r\n            },\r\n            function (analytics_1_1) {\r\n                analytics_1 = analytics_1_1;\r\n            }\r\n        ],\r\n        execute: function () {\r\n            stores = {\r\n                auth: new auth_1.default(),\r\n                journal: new journal_1.default(),\r\n                search: new search_1.default(),\r\n                route: new route_1.default(),\r\n                analytics: new analytics_1.default()\r\n            };\r\n            flux = new Fluxxor.Flux(stores, actions_2.default.methods);\r\n            page_4.default('/', function () {\r\n                if (!stores.auth.isLoggedIn) {\r\n                    page_4.default('/login');\r\n                }\r\n                else {\r\n                    //Check if logged in, if not, route to /login\r\n                    //If logged in, route to journal/today's date\r\n                    renderApp(Journal_1.default, { flux: flux, date: new Date() });\r\n                }\r\n            });\r\n            page_4.default('/register', function () {\r\n                if (!stores.auth.isLoggedIn) {\r\n                    renderApp(Signup_1.default, { flux: flux });\r\n                }\r\n                else {\r\n                    page_4.default('/login');\r\n                }\r\n            });\r\n            page_4.default('/login', function () {\r\n                if (!stores.auth.isLoggedIn) {\r\n                    renderApp(Login_1.default, { flux: flux });\r\n                }\r\n                else {\r\n                    page_4.default('/journal');\r\n                }\r\n            });\r\n            page_4.default('/profile', function () {\r\n                if (stores.auth.isLoggedIn) {\r\n                    renderApp(Profile_1.default, { flux: flux });\r\n                }\r\n                else {\r\n                    page_4.default('/login');\r\n                }\r\n            });\r\n            page_4.default('/forgot-password', function () {\r\n                renderApp(Forgot_1.default, { flux: flux });\r\n            });\r\n            page_4.default('/account/reset/:token', function (ctx) {\r\n                //console.log(ctx.params.token);\r\n                renderApp(ResetPassword_1.default, { flux: flux, token: ctx.params.token });\r\n            });\r\n            page_4.default('/account/verify/:token', function (ctx) {\r\n                //console.log(ctx.params.token);\r\n                flux.actions.account.verify(ctx.params.token);\r\n            });\r\n            page_4.default('/search/:query', function (ctx) {\r\n                if (!stores.auth.isLoggedIn) {\r\n                    page_4.default('/login');\r\n                }\r\n                else {\r\n                    var regex = /offset=([0-9]+)/i.exec(ctx.querystring);\r\n                    var offset = regex ? parseInt(regex[1]) : 0;\r\n                    renderApp(Search_1.default, { flux: flux, query: ctx.params.query, offset: offset });\r\n                }\r\n            });\r\n            page_4.default('/journal', function (ctx) {\r\n                if (!stores.auth.isLoggedIn) {\r\n                    page_4.default('/login');\r\n                }\r\n                else {\r\n                    var date = new Date();\r\n                    date.setHours(0, 0, 0, 0);\r\n                    renderApp(Journal_1.default, { flux: flux, date: date });\r\n                }\r\n            });\r\n            page_4.default('/journal/:date', function (ctx) {\r\n                if (!stores.auth.isLoggedIn) {\r\n                    page_4.default('/login');\r\n                }\r\n                else {\r\n                    renderApp(Journal_1.default, { flux: flux, date: moment_7.default(ctx.params.date, 'YYYY-M-D').toDate() });\r\n                }\r\n            });\r\n            page_4.default('/about', function () {\r\n                renderApp(About_1.default, {});\r\n            });\r\n            //page.exit((ctx, next) => {\r\n            //    console.log(ctx);\r\n            //    next();\r\n            //});\r\n            if (stores.auth.isLoggedIn != null) {\r\n                page_4.default();\r\n            }\r\n            else {\r\n                stores.auth.once('change', function () {\r\n                    page_4.default();\r\n                });\r\n            }\r\n        }\r\n    };\r\n});\r\n\n\n//# sourceURL=webpack:///./src/index.ts?");

/***/ })

/******/ });